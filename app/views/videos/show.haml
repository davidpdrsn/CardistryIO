%div.show-content
  %div.embedded-video
    = render partial: "embed_video", locals: { video: @video }

  %h1.video-title
    = @video.name
  %div.author
    %span{:class => "mini-circle-avatar with-username", :style => "background: url(#{@video.user.gravatar_url}) no-repeat 0 0;  background-size: contain"}
    %span.username
      = link_to @video.user.username, @video.user

  %div.video-info
    - if @video.description.present?
      = simple_format link_mentions(@video.description)
    - else
      %p.no-description
        This video has no description...

    %h3.video-meta
      = @video.video_type.humanize
      |
      = "posted #{time_ago_in_words(@video.created_at)} ago"

    = render partial: "shared/ratings", locals: { rateable: @video }

    = render partial: "shared/show_credits", locals: { object: @video, name: "video" }

    = render partial: "shared/show_moves_in_video", locals: { object: @video, name: "video" }

    %div.comments
      %div.section-headline
        - if @video.comments.empty?
          No comments yet
        - else
          = pluralize @video.comments.count, "comment"

      %div.comment-container
        = render @video.comments.order(:created_at)

        = render partial: "comments/form", locals: { commentable: @video }

  - if @video.user == current_user
    %div.owner-actions
      %ul
        %li
          = pluralize @video.views.count, "view"
          |
          = pluralize @video.unique_views_count, "unique view"
        %li
          = link_to "Edit move appearances", edit_appearances_video_path(@video)

        -# TODO: Make this a link
        %li
          = button_to "Edit", edit_video_path(@video), method: :get
        %li
          = button_to "Delete video", video_path(@video), method: :delete, data: { confirm: "Sure?" }

        - if @video.private?
          = link_to "Share video", new_video_sharing_path(@video)

        - if @video.sharings.present?
          = link_to "Edit sharing", edit_video_sharings_path(@video)
